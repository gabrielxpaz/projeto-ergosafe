<div class="container">
    <div class="content">
        <div class="container-create">
        <div class="btn-create-user">
            <a href="/dashboard/criar-usuario" class="btn">Criar Usuário</a>
        </div>
    </div>
    <div id="table-users"></div>
    </div>
    
</div>

<script>
  const usersData = {{{json users}}};

  console.log(usersData);

  const table = new Tabulator("#table-users", {
  data: usersData,
  layout: "fitColumns",
  pagination: "local",
  paginationSize: 10,
  height: "400px",
  columns: [
    { title: "ID", field: "id"},
    { title: "Nome", field: "name" },
    { title: "Email", field: "email" },
    { title: "Função", field: "role" },
    {
      title: "Ações",
      formatter: function(cell, formatterParams) {
        const id = cell.getRow().getData().id;
        return `<button class="btn-edit" data-id="${id}">Editar</button>`;
      },
      width: 100,
      hozAlign: "center",
      cellClick: function(e, cell) {
        const id = cell.getRow().getData().id;
        window.location.href = `/dashboard/editar-usuario/${id}`;  // Redireciona para a rota de edição
      }
    }
  ],
});
</script>

<style>
  .btn-edit {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
  }

  .btn-edit:hover {
    background-color: #2980b9;
  }
</style>

